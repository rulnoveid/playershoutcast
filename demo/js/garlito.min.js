!function(i){i.fn.garlitoPlayer=function(a){var o=i.extend({ip:"",port:"",protocol:"http://",emptyCoverImgUrl:"img/no-cover.jpg",autoplay:!0,volume:.5,popup:!1,lastFmApiKey:"",facebookUrl:!1,instagramUrl:!1,logoUrl:"img/logo.png",radioName:" Radio Station Name",mainColor:"red",listenButtonId:"",nowPlayingText:"Now Playing:"},a),l='<div class="garlito-player"> <div id="garlito-close"><img src="img/close-gray.svg"></div><div class="container-fluid"> <div class="row"> <div class="brand col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 height"> <div class="branding"> <div class="logo-holder"> <div class="garlito-logo"> <img src="'+o.logoUrl+'" alt="Fabric Radio"> </div></div><div class="name-holder"> <div class="name">'+o.radioName+'</div></div><div class="social-media"> <a id="garlitoFacebookUrl" href="'+o.facebookUrl+'" target="_blank"><img src="img/facebook.svg"></a> <a id="garlitoInstagramUrl" href="'+o.instagramUrl+'" target="_blank"><img src="img/instagram.svg"></a> </div><div class="garlito-cover-mobile"> <img width="60" height="60" src="img/no-cover.jpg" id="garlito-cover-mobile"> </div><div class="play-settings"> <div class="play-pause item"> <img id="garlito-play" alt="Play" src="img/play-gray.svg"> <img id="garlito-pause" alt="Pause" src="img/pause-gray.svg"> </div><div class="volume item"> <input type="range" min="0" max="100" value="" class="slider" id="garlito-volume-slider"> </div></div><div class="garlito-cover"> <img id="garlito-cover" width="60" height="60" src="img/no-cover.jpg" id=""> </div><div class="radio-title"> <span class="now-playing">'+o.nowPlayingText+'<span> <span id="garlito-currentSong"></span> </div></div></div></div></div></div>';i(this).html(l),0==o.facebookUrl&&i("#garlitoFacebookUrl").css("display","none"),0==o.instagramUrl&&i("#garlitoInstagramUrl").css("display","none"),0==o.facebookUrl&&0==o.instagramUrl&&i(".social-media").css("display","none");var s=o.protocol+o.ip+":"+o.port+"/statistics?json=1",t=o.protocol+o.ip+":"+o.port+"/stream",e=new Howl({src:[t],autoplay:o.autoplay,volume:o.volume,html5:!0,format:["mp3","m4a","mpeg","ogg","acc","dolby"],onend:function(){console.log("Finished!")}}),r=i(".garlito-player"),c=i("#garlito-play"),n=i("#garlito-pause"),d=i("#garlito-volume-slider"),g=i("#garlito-currentSong"),p=i("#garlito-cover"),m=i("#garlito-cover-mobile"),v=i("#garlito-close"),u=i(o.listenButtonId);function y(i){for(var a=["Official","Lyric","Video","Official Music Video","Official Video","Official video","official video","Official Video","OFFICIAL VIDEO","Official Audio","Lyrics","lyrics","official","HD","HQ","Original Mix","Original Version","radio edit","Best 92.6","Unknown - ","Premium Content!","Extended Mix","Audio","FULL","[]","[ ]","( )","(  )","()"],o=!0,l=0;o;)i=i.replace(a[l],""),(l+=1)==a.length&&(o=!1);return i}function f(a){i.getJSON("https://ws.audioscrobbler.com/2.0/?method=track.search&track="+a+"&api_key="+o.lastFmApiKey+"&format=json",{get_param:"data"},function(i){i.results.trackmatches.track.length&&(""===i.results.trackmatches.track[0].image[3]["#text"]?(p.attr("src",o.emptyCoverImgUrl),m.attr("src",o.emptyCoverImgUrl)):(p.attr("src",i.results.trackmatches.track[0].image[3]["#text"]),m.attr("src",i.results.trackmatches.track[0].image[3]["#text"])))})}return o.popup&&""!==o.listenButtonId?(r.parent("div").css("display","none"),r.css("display","none"),e.stop(),u.click(function(){r.addClass("animated pulse"),r.parent("div").css("display","block"),r.css("display","block"),e.play()}),v.click(function(){r.parent("div").css("display","none"),r.css("display","none"),e.stop()})):(r.parent("div").css("display","block"),e.play(),v.click(function(){r.parent("div").css("display","none"),r.css("display","none"),e.stop()})),d.val(100*e._volume),d.on("input change",function(){e.volume(d.val()/100)}),c.click(function(){e.play(),c.css("display","none"),n.css("display","inline-block")}),n.click(function(){e.pause(),n.css("display","none"),c.css("display","inline-block")}),i.getJSON("https://cors-anywhere.herokuapp.com/"+s,function(i){var a=i.streams[0].songtitle,o=a=(a=a.split(" - "))[1]+" - "+a[2];g.empty(),g.append(y(o)),f(y(o))}),setInterval(function(){i.getJSON("https://cors-anywhere.herokuapp.com/"+s,function(i){var a=i.streams[0].songtitle,o=a=(a=a.split(" - "))[1]+" - "+a[2];g.empty(),g.append(y(o)),f(y(o))})},5e3),this}}(jQuery);